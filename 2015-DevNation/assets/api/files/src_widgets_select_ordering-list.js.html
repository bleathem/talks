<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/widgets/select/ordering-list.js - richfaces-widgets</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.7.0/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap-responsive.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-skin-sam">
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <h1 class="brand" style="padding: 10px 16px 10px; height: 20px; line-height: 20px; margin-left: 0;">
        
	    <img alt="richfaces-widgets" src="../../logo.png" style="max-height: 65%;" title="richfaces-widgets">
        
            richfaces-widgets
        </h1>
	<div class="nav">
            <li class="divider-vertical"></li>
            <li>
                <p class="navbar-text">
                    API Docs for Version: <b>0.1.1-wip</b>
                </p>
            </li>
        </div>
        <form class="navbar-form pull-right" style="line-height: 40px; height: 40px;">
            <input style="margin-top: 0;" type="text" class="search-query" placeholder="Search for classes/modules..." data-obj='["classes/autocomplete", "classes/chart", "classes/dataScroller", "classes/dataTable", "classes/editor", "classes/orderingList", "classes/pickList", "classes/select", "classes/stopwatch", "classes/subTable", "classes/subTableToggle", "modules/Input", "modules/Output", "modules/Select", "modules/Table"]'>
        </form>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="span3">
	    <div>
    <h3>APIs</h3>
    <div id="sidebar">
        <ul id="main-nav" class="nav nav-tabs" style="margin-bottom:0;">
            <li class="active"><a href="#classes" data-toggle="tab">Widgets</a></li>
            <li><a href="#modules" data-toggle="tab">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" placeholder="Type to filter APIs">
        </div>

        <div class="tab-content" style="border: 1px solid #DDD; border-top:0;">
            <div class="tab-pane active" id="classes">
                <ul id="api-classes" class="nav nav-list">
                    
                        <li><a href="../classes/autocomplete.html">autocomplete</a></li>
                    
                        <li><a href="../classes/chart.html">chart</a></li>
                    
                        <li><a href="../classes/dataScroller.html">dataScroller</a></li>
                    
                        <li><a href="../classes/dataTable.html">dataTable</a></li>
                    
                        <li><a href="../classes/editor.html">editor</a></li>
                    
                        <li><a href="../classes/orderingList.html">orderingList</a></li>
                    
                        <li><a href="../classes/pickList.html">pickList</a></li>
                    
                        <li><a href="../classes/select.html">select</a></li>
                    
                        <li><a href="../classes/stopwatch.html">stopwatch</a></li>
                    
                        <li><a href="../classes/subTable.html">subTable</a></li>
                    
                        <li><a href="../classes/subTableToggle.html">subTableToggle</a></li>
                    
                </ul>
            </div>

            <div class="tab-pane" id="modules">
                <ul id="api-modules" class="nav nav-list">
                    
                        <li><a href="../modules/Input.html">Input</a></li>
                    
                        <li><a href="../modules/Output.html">Output</a></li>
                    
                        <li><a href="../modules/Select.html">Select</a></li>
                    
                        <li><a href="../modules/Table.html">Table</a></li>
                    
                </ul>
            </div>
        </div>
    </div>
</div>

        </div>
        <div class="span9">
                <form id="options-form" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited" class="checkbox">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected" class="checkbox">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private" class="checkbox">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated" class="checkbox">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </form>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <div class="page-header">
    <h1>src/widgets/select/ordering-list.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums">
/**
 * A widget providing sorting capabilities for a list of elements
 *
 * @module Select
 * @class orderingList
 */
(function ($) {

  $.widget(&#x27;rich.orderingList&#x27;, {

    options: {
      /**
       * Disable the orderingList widget
       *
       * @property disabled
       * @type Boolean
       * @default false
       */
      disabled: false,
      /**
       * The text to use for the orderingList header
       *
       * @property header
       * @type String
       */
      header: null,
      /**
       * The height of the orderingList
       *
       * 1. A String with appropriate units, eg.:
       *        height: &#x27;120px&#x27;
       *
       * 2. An integer without any units, in which case the units of &#x60;px&#x60; are assumed.
       *        height: 120
       *
       * @property height
       * @type String
       */
      height: null,
      /**
       * The minimum height of the orderingList
       *
       * 1. A String with appropriate units, eg.:
       *        heightMin: &#x27;120px&#x27;
       *
       * 2. An integer without any units, in which case the units of &#x60;px&#x60; are assumed:
       *        heightMin: 120
       *
       * @property heightMin
       * @type String
       */
      heightMin: null,
      /**
       * The maximum height of the orderingList
       *
       * 1. A String with appropriate units, eg.:
       *        heightMax: &#x27;120px&#x27;
       *
       * 2. An integer without any units, in which case the units of &#x60;px&#x60; are assumed:
       *        heightMax: 120

       * @property heightMax
       * @type String
       */
      heightMax: null,
      /**
       * A CSS class to be added to the orderingList.
       * Multiple classes should be space separated
       *
       * @property styleClass
       * @type String
       */
      styleClass: null,
      /**
       * When _table_ layout is used,
       * _columnClasses_ specifies a comma-delimited list of CSS style classes to apply to each column.
       * A space separated list of classes may be specified for an individual column.
       *
       * If the number of classes in this list is less than the number of column children, then no class will be
       * applied to the columns greater than the number of classes.  If however the final class in the list is the &#x60;*&#x60;
       * character, the classes will instead be applied in a repeating manner every n-fold column, where n is the order
       * the class in this list.
       *
       *  If there are more class names than columns, the overflow ones are ignored.
       *
       * @property columnClasses
       * @type String
       */
      columnClasses: null,
      /**
       * When true, show the buttons for ordering the selected elements
       *
       * @property showButtons
       * @type Boolean
       * @default true
       */
      showButtons: true,
      /**
       * Text to be applied to the ordering buttons of the ordering list.  The text should be arranged as an object in
       * JSON notation.
       *
       * eg. {first: ..., up: ..., down: ..., last: ...}
       *
       * @property buttonsText
       * @type JSON
       * @default null
       */
      buttonsText: null,
      /**
       * When true, it is not possible to move a selected element outside of the orderingList
       *
       * @property contained
       * @type Boolean
       * @default true
       */
      contained: true,
      /**
       * When true dragging the mouse over the elements selects multiple elements.  This also reduces the drag handle
       * used to re-order the elements.
       *
       * @property dragSelect
       * @type Boolean
       * @default true
       */
      dragSelect: false,
      /**
       * Allows elements to be dragged onto an empty list when true
       *
       * @property dropOnEmpty
       * @type Boolean
       * @default true
       */
      dropOnEmpty: true,
      /**
       * Allows elements to be ordered by drag and drop with the mouse when true
       *
       * @property mouseOrderable
       * @type Boolean
       * @default true
       */
      mouseOrderable: true,

      /**
       * Function used to sort the elements after an item has been added to the list.
       * &#x60;sortFunction&#x60; must meet the API requirements of the compareFunction for the
       * [Array.prototype.sort](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)
       * method.
       *
       * @property sortFunction
       * @type Function
       */
      sortFunction: null,

      // callbacks

      /**
       * Fired when the target list of the orderingList changes values.
       *
       * @event change
       */
      change: null,
      /**
       * Fired after the dynamically created DOM elements of the orderingList have been created
       *
       * @event addDomElements
       */
      addDomElements: null,
      /**
       * Fired after the orderingList has been created
       *
       * @event create
       */
      create: null,
      /**
       * Fired after the orderingList has been destroyed
       *
       * @event destroy
       */
      destroy: null,
      /**
       * Fired when the orderingList receives focus
       *
       * @event focus
       */
      focus: null,
      /**
       * Fired when the orderingList loses focus
       *
       * @event blur
       */
      blur: null
    },

    _create: function () {
      var widget = this;
      this.selectableOptions = {
        disabled: widget.options.disabled
      };
      this.sortableOptions = { handle: this.options.dragSelect ? &#x27;.handle&#x27; : false,
        disabled: this.options.disabled,
        dropOnEmpty: this.options.dropOnEmpty,
        scroll: true,
        placeholder: &#x27;placeholder&#x27;,
        tolerance: &#x27;pointer&#x27;,
        start: function (event, ui) {
          widget.currentItems = ui.item.parent().children(&#x27;.ui-selected&#x27;).not(&#x27;.placeholder&#x27;).not(&#x27;.helper-item&#x27;);
          var helper = ui.helper;
          var placeholder = widget.element.find(&#x27;.placeholder&#x27;);
          placeholder.css(&#x27;height&#x27;, helper.css(&#x27;height&#x27;));

          widget.currentItems.not(ui.item).hide();
        },
        sort: function (event, ui) {
          var $widget = $(this);
          var helperTop = ui.helper.position().top,
            helperBottom = helperTop + ui.helper.outerHeight();
          $widget.children(&#x27;.ui-selectee&#x27;).not(&#x27;.placeholder&#x27;).not(&#x27;.helper-item&#x27;).not(&#x27;.ui-selected&#x27;).each(function () {
            var item = $(this);
            var itemTop = item.position().top;
            var itemMiddle = item.position().top + item.outerHeight() / 2;
            /* if the helper overlaps half of an item, move the placeholder */
            if (helperTop &lt; itemMiddle &amp;&amp; itemMiddle &lt; helperBottom) {
              if (itemTop &gt; helperTop) {
                $(&#x27;.placeholder&#x27;, $widget).insertAfter(item);
              } else {
                $(&#x27;.placeholder&#x27;, $widget).insertBefore(item);
              }
              return false;
            }
          });
        },
        cancel: function (event, ui) {
          widget.currentItems.show();
        },
        over: function (event, ui) {
          if (widget.fillItem) {
            widget._updateFillRow();
          }
        },
        beforeStop: function (event, ui) {
        },
        stop: function (event, ui) {
          var first = widget.currentItems.first();
          if (first.get(0) !== ui.item.get(0)) {
            ui.item.before(first);
            first.after(widget.currentItems.not(first).detach());
          } else {
            ui.item.after(widget.currentItems.not(ui.item).detach());
          }
          widget.currentItems.not(&#x27;.placeholder&#x27;).show();
          if (widget.fillItem) {
            widget._updateFillRow();
          }
          var receivingWidget = ui.item.parents(&#x27;.list&#x27;).data(&#x27;orderingList&#x27;);
          if (receivingWidget !== widget) {
            receivingWidget._checkSort();

            // fire change events here instead of in the &#x27;receive&#x27; handler since we manually add/remove the extra drag elements
            var remUi = widget._uiHash();
            remUi.change = &#x27;remove&#x27;;
            widget._trigger(&#x27;change&#x27;, event, remUi);

            var addUi = receivingWidget;
            addUi.change = &#x27;add&#x27;;
            receivingWidget._trigger(&#x27;change&#x27;, event, addUi);
          }
        },
        update: function(event, ui) {
          if (ui.sender === null &amp;&amp; ui.item.parents(&#x27;.ordering-list&#x27;).get(0) === widget.element.parents(&#x27;.ordering-list&#x27;).get(0)) {
            var ui2 = widget._uiHash();
            ui2.change = &#x27;move&#x27;;
            ui2.movement = &#x27;drag&#x27;;
            widget._trigger(&#x27;change&#x27;, event, ui2);
          }
        },
      };
      if (this.element.is(&#x27;table&#x27;)) {
        this.strategy = &#x27;table&#x27;;
        this.$pluginRoot = this.element.find(&#x27;tbody&#x27;);
        this.sortableOptions.items = &#x27;tr:not(.fill-item)&#x27;;
        this.selectableOptions.filter = &#x27;tr:not(.fill-item)&#x27;;
        this.sortableOptions.helper = $.proxy(this._rowHelper, this);
      } else {
        this.strategy = &#x27;list&#x27;;
        this.$pluginRoot = this.element;
        this.selectableOptions.filter = &#x27;li&#x27;;
        this.sortableOptions.helper = $.proxy(this._listHelper, this);
      }
      if (this.options.contained !== false) {
        this.sortableOptions.containment = this.$pluginRoot;
        this.sortableOptions.axis = &#x27;y&#x27;;
      }
      // if mouse ordering is disabled buttons have to be shown
      this._addDomElements();
      if (this.options.widgetEventPrefix) {
        this.widgetEventPrefix = this.options.widgetEventPrefix;
      }
      if (this.options.mouseOrderable === true) {
        this.$pluginRoot.sortable(this.sortableOptions);
      }

      this.$pluginRoot.selectable(this.selectableOptions);
      if (this.options.disabled === true) {
        widget._disable();
      }
      this._addDragListeners();
      this.selectList.on(&#x27;focusin&#x27;, function (event) {
        widget._trigger(&#x27;focus&#x27;, event, widget._uiHash());
      });
      this.selectList.on(&#x27;focusout&#x27;, function (event) {
        widget._trigger(&#x27;blur&#x27;, event, widget._uiHash());
      });
      if (this.options.height !== null) {
        this._setHeight(this.options.height);
      }
      if (this.options.heightMin !== null) {
        this._setHeightMin(this.options.heightMin);
      }
      if (this.options.heightMax !== null) {
        this._setHeightMax(this.options.heightMax);
      }
    },

    _destroy: function () {
      this._super();
      if (this.options.mouseOrderable === true) {
        this.$pluginRoot.sortable(&#x27;destroy&#x27;);
      }
      this.$pluginRoot.selectable(&#x27;destroy&#x27;);
      this._removeDomElements();

      // remove empty class attributes                             y
      if (!this.element.attr(&#x27;class&#x27;)) {
        this.element.removeAttr(&#x27;class&#x27;);
      }
      if (this.strategy === &#x27;table&#x27;) {
        this.element.children().each(function () {
          var $part = $(this);
          if (!$part.attr(&#x27;class&#x27;)) {
            $part.removeAttr(&#x27;class&#x27;);
          }
          $part.children().each(function () {
            var $row = $(this);
            if (!$row.attr(&#x27;class&#x27;)) {
              $row.removeAttr(&#x27;class&#x27;);
            }
            $row.children().each(function () {
              var $cell = $(this);
              if (!$cell.attr(&#x27;class&#x27;)) {
                $cell.removeAttr(&#x27;class&#x27;);
              }
            });
          });
        });
      } else {
        this.element.children().each(function () {
          var $selectable = $(this);
          if (!$selectable.attr(&#x27;class&#x27;)) {
            $selectable.removeAttr(&#x27;class&#x27;);
          }
        });
      }
      this._trigger(&#x27;destroy&#x27;, undefined, {});
    },

    /** Public API methods **/

    /**
     * Connect the orderingList with another orderingList, allowing items to be dragged between them.
     *
     * @param target {Object} The orderingList with which to connect.
     * @method connectWith
     * @chainable
     */
    connectWith: function (target) {
      if (! this.options.mouseOrderable) {
        return this;
      }
      var targetOrderingList = target.data(&#x27;richOrderingList&#x27;);
      this.$pluginRoot.sortable(&#x27;option&#x27;, &#x27;connectWith&#x27;, targetOrderingList.$pluginRoot);
      this._addFillRow();
      target.on(&#x27;sortover&#x27;, $.proxy(this._updateFillRow, this));  // own &#x27;out&#x27; event causes placeholder interference
      return this;
    },

    /**
     * Determine if the given item is selected
     *
     * @method isSelected
     * @param item {Object} jQuery object of one of the orderingList elements
     * @returns {Boolean} True if the item is selected, false otherwise
     */
    isSelected: function (item) {
      return $(item).hasClass(&#x27;ui-selected&#x27;);
    },

    /**
     * Find and return the list of orderingList elements that are selected
     *
     * @method getSelected
     * @returns {Object} A jQuery list of selected items
     */
    getSelected: function() {
      return this.element.find(&#x27;.ui-selected&#x27;);
    },

    /**
     * Select the given item
     *
     * @method selectItem
     * @param item {Object} jQuery object of the orderingList element to select
     * @chainable
     */
    selectItem: function (item) {
      $(item).addClass(&#x27;ui-selected&#x27;);
      return this;
    },

    /**
     * Un-select the given item
     *
     * @method unSelectItem
     * @param item {Object} jQuery object of the orderingList element to un-select
     * @chainable
     */
    unSelectItem: function (item) {
      $(item).removeClass(&#x27;ui-selected&#x27;);
      return this;
    },

    /**
     * Select all items in the orderingList
     *
     * @method selectAll
     * @chainable
     */
    selectAll: function () {
      this.element.find(&#x27;.ui-selectee&#x27;).addClass(&#x27;ui-selected&#x27;);
      return this;
    },

    /**
     * Un-select all items in the orderingList
     *
     * @method unSelectAll
     * @chainable
     */
    unSelectAll: function () {
      this.element.find(&#x27;.ui-selected&#x27;).removeClass(&#x27;ui-selected&#x27;);
      return this;
    },

    /**
     * Move the given items to the top of the orderingList
     *
     * @method moveFirst
     * @param items {Object} the items to move to the top
     * @param [event=null] {Object} the event used that triggered this movement
     * @chainable
     */
    moveFirst: function (items, event) {
      event = event || null;
      items = items || $(&#x27;.ui-selected&#x27;, this.element);
      if (this.options.disabled) { return; }
      var moved = this.$pluginRoot.find(items);
      var first = moved.prevAll().not(&#x27;.ui-selected&#x27;).last();
      var initialState = this.getOrderedKeys();
      $(moved).insertBefore(first);
      var finalState = this.getOrderedKeys();
      if (initialState.toString() !== finalState.toString()) {
        var ui = this._uiHash();
        ui.change = &#x27;move&#x27;;
        ui.movement = &#x27;moveFirst&#x27;;
        this._trigger(&#x27;change&#x27;, event, ui);
      }
      return this;
    },

    /**
     * Move the given items up one step in the orderingList
     *
     * @method moveUp
     * @param [items] {Object} the items to move up
     * @param [event=null] {Object} the event used that triggered this movement
     * @chainable
     */
    moveUp: function (items, event) {
      event = event || null;
      items = items || $(&#x27;.ui-selected&#x27;, this.element);
      if (this.options.disabled) { return; }
      var initialState = this.getOrderedKeys();
      var moved = this.$pluginRoot.find(items);
      $(moved).each(function () {
        var $item = $(this);
        var prev = $item.prevAll().not(&#x27;.ui-selected&#x27;).first();
        if (prev.length &gt; 0) {
          $item.insertBefore(prev);
        }
      });
      var finalState = this.getOrderedKeys();
      if (initialState.toString() !== finalState.toString()) {
        var ui = this._uiHash();
        ui.change = &#x27;move&#x27;;
        ui.movement = &#x27;moveUp&#x27;;
        this._trigger(&#x27;change&#x27;, event, ui);
      }
      return this;
    },

    /**
     * Move the given items down one step in the orderingList
     *
     * @method moveDown
     * @param [items] {Object} the items to move down
     * @param [event=null] {Object} the event used that triggered this movement
     * @chainable
     */
    moveDown: function (items, event) {
      event = event || null;
      items = items || $(&#x27;.ui-selected&#x27;, this.element);
      if (this.options.disabled) { return; }
      var initialState = this.getOrderedKeys();
      var moved = this.$pluginRoot.find(items);
      $(moved).sort(function () {
        return 1;
      }).each(function () {
          var $item = $(this);
          var next = $item.nextAll().not(&#x27;.ui-selected&#x27;).first();
          if (next.length &gt; 0) {
            $item.insertAfter(next);
          }
        });
      var finalState = this.getOrderedKeys();
      if (initialState.toString() !== finalState.toString()) {
        var ui = this._uiHash();
        ui.change = &#x27;move&#x27;;
        ui.movement = &#x27;moveDown&#x27;;
        this._trigger(&#x27;change&#x27;, event, ui);
      }
      return this;
    },

    /**
     * Move the given items to the end of the orderingList
     *
     * @method moveLast
     * @param [items] {Object} the items to move to the end
     * @param [event=null] {Object} the event used that triggered this movement
     * @chainable
     */
    moveLast: function (items, event) {
      event = event || null;
      items = items || $(&#x27;.ui-selected&#x27;, this.element);
      if (this.options.disabled) { return; }
      var initialState = this.getOrderedKeys();
      var moved = this.$pluginRoot.find(items);
      var last = moved.nextAll().not(&#x27;.ui-selected&#x27;).last();
      $(moved).insertAfter(last);
      var finalState = this.getOrderedKeys();
      if (initialState.toString() !== finalState.toString()) {
        var ui = this._uiHash();
        ui.change = &#x27;move&#x27;;
        ui.movement = &#x27;moveLast&#x27;;
        this._trigger(&#x27;change&#x27;, event, ui);
      }
      return this;
    },

    /**
     * Remove the given items from the orderingList
     *
     * @method remove
     * @param [items] {Object} the items to remove
     * @returns {Object} the items removed from the orderingList
     */
    remove: function (items) {
      items = items || $(&#x27;.ui-selected&#x27;, this.element);
      if (!items || items.length === 0) {
        return null;
      }
      var removed = this.$pluginRoot.find(items).detach();
      var ui = this._uiHash();
      ui.change = &#x27;remove&#x27;;
      this._trigger(&#x27;change&#x27;, {}, ui);
      return removed;
    },

    /**
     * Add the given items to the orderingList
     *
     * @method add
     * @param items {Object} the items to add
     * @returns {Object} the items added to the orderingList
     */
    add: function (items) {
      if (!items || items.length === 0) {
        return null;
      }
      this.$pluginRoot.prepend(items);
      this._checkSort();
      var ui = this._uiHash();
      ui.change = &#x27;add&#x27;;
      this._trigger(&#x27;change&#x27;, {}, ui);
      return items;
    },

    /**
     * Retrieve the jQuery list of all items in the orderingList
     *
     * @method getOrderedElements
     * @returns {Object} the jQuery list of selected elements
     */
    getOrderedElements: function () {
      return this.element.find(&#x27;.ui-selectee&#x27;);
    },

    /**
     * Retrieve the keys of all items in the orderingList
     *
     * @method getOrderedKeys
     * @returns {Array} An array of the keys of the selected elements
     */
    getOrderedKeys: function () {
      return (this._createKeyArray( this.getOrderedElements()));
    },

    /**
     * Removes the ordering list functionality completely. This will return the element back to its pre-init state.
     *
     * @method destroy
     */
    // method implemented in $.widget

    _setOption: function (key, value) {
      var widget = this;
      if (this.options.key === value) {
        return;
      }
      switch (key) {
        case &#x27;disabled&#x27;:
          if (value === true) {
            widget._disable();
          } else {
            widget._enable();
          }
          break;
        case &#x27;header&#x27;:
          if (!widget.header) {
            widget._addHeader();
          }
          widget.header.text(value);
          break;
        case &#x27;height&#x27;:
          widget._setHeight(value);
          break;
        case &#x27;heightMin&#x27;:
          widget._setHeightMin(value);
          break;
        case &#x27;heightMax&#x27;:
          widget._setHeightMax(value);
          break;
        case &#x27;columnClasses&#x27;:
          if (widget.options.columnClasses) {
            widget._removeColumnClasses(widget.options.columnClasses);
          }
          widget._addColumnClasses(value);
          break;
        case &#x27;styleClass&#x27;:
          if (widget.options.styleClass) {
            widget.selectList.removeClass(this.options.styleClass);
          }
          widget.selectList.addClass(value);
          break;
        case &#x27;buttonsText&#x27;:
          this._applyButtonsText(this.selectList.find(&#x27;.btn-group-vertical&#x27;), value);
          break;
      }
      this._super(key, value);
    },

    _addDragListeners: function() {
      var widget = this;
      if (this.options.dragSelect === false) {
        this.element.on(&#x27;mousedown&#x27;, &#x27;.ui-selectee&#x27;, function (event) {
          var item = $(this);
          if (widget.selectList.get(0) !== document.activeElement) {
            widget.selectList.focus();
          }
          var list = item.parents(&#x27;.list&#x27;).first();
          list.data(&#x27;richOrderingList&#x27;).mouseStarted = true;
        });
        this.$pluginRoot.on(&#x27;mousemove&#x27;, &#x27;.ui-selectee&#x27;, function (event) {
          var item = $(this);
          var list = item.parents(&#x27;.list&#x27;).first();
          var orderingList = list.data(&#x27;richOrderingList&#x27;);
          if (orderingList.mouseStarted) {
            orderingList.mouseStarted = false;
            if (!item.hasClass(&#x27;ui-selected&#x27;)) {
              var selectable = orderingList.$pluginRoot.data(&#x27;uiSelectable&#x27;);
              selectable._mouseStart(event);
              selectable._mouseStop(event);
            }
          }
        });
        this.element.on(&#x27;mouseup&#x27;, &#x27;.ui-selectee&#x27;, function (event) {
          var item = $(this);
          var list = item.parents(&#x27;.list&#x27;).first();
          var orderingList = list.data(&#x27;richOrderingList&#x27;);
          if (orderingList.mouseStarted) {
            orderingList.mouseStarted = false;
            var selectable = orderingList.$pluginRoot.data(&#x27;uiSelectable&#x27;);
            selectable._mouseStart(event);
            selectable._mouseStop(event);
          }
        });
      } else {
        this.element.find(&#x27;.handle&#x27;).on(&#x27;mousedown&#x27;, function (event) {
          var item = $(this).parents(&#x27;.ui-selectee&#x27;).first();
          if (!item.hasClass(&#x27;ui-selected&#x27;)) {
            var list = item.parents(&#x27;.list&#x27;).first();
            var selectable = list.data(&#x27;richOrderingList&#x27;).$pluginRoot.data(&#x27;uiSelectable&#x27;);
            selectable._mouseStart(event);
            selectable._mouseStop(event);
          }
        });
      }
    },

    _removeDragListeners: function() {
      if (this.options.dragSelect === false) {
        this.element.off(&#x27;mousedown&#x27;, &#x27;.ui-selectee&#x27;);
        this.element.off(&#x27;mousemove&#x27;, &#x27;.ui-selectee&#x27;);
        this.element.off(&#x27;mouseup&#x27;, &#x27;.ui-selectee&#x27;);
      } else {
        this.element.find(&#x27;.handle&#x27;).off(&#x27;mousedown&#x27;);
      }
    },

    _listHelper: function (e, item) {
      var $helper = $(&#x27;&lt;ol /&gt;&#x27;).addClass(&#x27;helper&#x27;)
        .css(&#x27;height&#x27;, &#x27;auto&#x27;).css(&#x27;width&#x27;, this.element.css(&#x27;width&#x27;));
      item.parent().children(&#x27;.ui-selected&#x27;).not(&#x27;.ui-sortable-placeholder&#x27;).clone().addClass(&#x27;helper-item&#x27;).show().appendTo($helper);
      return $helper;
    },

    _rowHelper: function (e, item) {
      var $helper = $(&#x27;&lt;div /&gt;&#x27;).addClass(&#x27;helper&#x27;).css(&#x27;height&#x27;, &#x27;auto&#x27;);
      item.parent().children(&#x27;.ui-selected&#x27;).not(&#x27;.ui-sortable-placeholder&#x27;).clone().addClass(&#x27;helper-item&#x27;).show().appendTo($helper);
      /* we lose the cell width in the clone, so we re-set it here: */
      var firstRow = $helper.children(&#x27;tr&#x27;).first();
      /* we only need to set the column widths on the first row */
      firstRow.children().each(function (colindex) {
        var originalCell = item.children().get(colindex);
        var originalWidth = $(originalCell).css(&#x27;width&#x27;);
        $(this).css(&#x27;width&#x27;, originalWidth);
      });
      return $helper;
    },

    _createKeyArray: function (items) {
      var keys = [];
      items.each(function () {
        var $this = $(this);
        var dataKey = $this.data(&#x27;key&#x27;);
        var key = (typeof dataKey !== &#x27;undefined&#x27;) ? dataKey : $this.text();
        keys.push(key);
      });
      return keys;
    },

    _checkSort: function () {
      if (this.options.sortFunction &amp;&amp; typeof this.options.sortFunction === &#x27;function&#x27;) {
        var sortedElements = this.getOrderedElements().sort(this.options.sortFunction);
        var widget = this;
        sortedElements.each(function() {
          widget.element.append(this);
        });
      }
    },

    /** Initialisation methods **/

    _addDomElements: function () {
      this._addParents();
      this._addMouseHandles();
      if (this.options.showButtons === true) {
        this._addButtons();
      }
      if (this.strategy === &#x27;table&#x27;) { /* round the table row corners */
        var widget = this;
        this.element.find(&#x27;tr&#x27;).each(function () {
            var $tr = $(this);
            var children = $tr.children();
            children.last().addClass(&#x27;last&#x27;);
            children.first().addClass(&#x27;first&#x27;);
            if (widget.options.columnClasses) {
              widget._addColumnClassesToCells(children, widget.options.columnClasses);
            }
          });
      }
      this._trigger(&#x27;addDomElements&#x27;, undefined, this._uiHash());
    },

    _addColumnClasses: function(columnClasses) {
      if (this.strategy !== &#x27;table&#x27;) {
        return;
      }
      var widget = this;
      this.element.find(&#x27;tr&#x27;).each(function () {
          widget._addColumnClassesToCells($(this).children(), columnClasses);
        });
    },

    _addColumnClassesToCells: function(cells, columnClassesString) {
      var columnClasses = this._splitColumnClasses(columnClassesString);
      var repeat = $.trim(columnClasses[columnClasses.length - 1]) === &#x27;*&#x27;;
      var length = repeat ? columnClasses.length - 1 : columnClasses.length;
      cells.each(function(count) {
        if (repeat || count &lt; columnClasses.length) {
          var columnClass = columnClasses[count % length];
          $(this).addClass(columnClass);
        } else {
          return false;
        }
      });
    },

    _splitColumnClasses: function(string) {
      var array = string.split(&#x27;,&#x27;);
      $.each(array, function(index, value) {
        array[index] = $.trim(value);
      });
      return array;
    },

    _addButtons: function () {
      var buttonStack = $(&#x27;&lt;div/&gt;&#x27;)
        .addClass(&#x27;btn-group-vertical&#x27;);
      this._addButton(buttonStack, &#x27;first&#x27;, $.proxy(this._firstHandler, this));
      this._addButton(buttonStack, &#x27;up&#x27;, $.proxy(this._upHandler, this));
      this._addButton(buttonStack, &#x27;down&#x27;, $.proxy(this._downHandler, this));
      this._addButton(buttonStack, &#x27;last&#x27;, $.proxy(this._lastHandler, this));
      if (this.options.buttonsText) {
        this._applyButtonsText(buttonStack, this.options.buttonsText);
      }
      this.content.append(
        $(&#x27;&lt;div /&gt;&#x27;).addClass(&#x27;button-column&#x27;).append(buttonStack));
    },

    _applyButtonsText: function(buttonStack, buttonsText) {
      this._applyButtonText(buttonStack.find(&#x27;.btn-first&#x27;), buttonsText.first);
      this._applyButtonText(buttonStack.find(&#x27;.btn-up&#x27;), buttonsText.up);
      this._applyButtonText(buttonStack.find(&#x27;.btn-down&#x27;), buttonsText.down);
      this._applyButtonText(buttonStack.find(&#x27;.btn-last&#x27;), buttonsText.last);
    },

    _applyButtonText: function(button, text) {
      if (!text) {
        if (button.hasClass(&#x27;labeled&#x27;)) {
          button.removeClass(&#x27;labeled&#x27;);
          button.find(&#x27;span&#x27;).remove();
        }
        return;
      }
      if (button.hasClass(&#x27;labeled&#x27;)) {
        button.find(&#x27;span&#x27;).text(text);
      } else {
        button.addClass(&#x27;labeled&#x27;).append($(&#x27;&lt;span /&gt;&#x27;).text(text));
      }
    },

    _addButton: function (buttonStack, buttonClass, handler) {
      var button = $(&#x27;&lt;button/&gt;&#x27;)
        .attr(&#x27;type&#x27;, &#x27;button&#x27;)
        .addClass(&#x27;btn btn-default&#x27;)
        .addClass(&#x27;btn-&#x27; + buttonClass)
        .on(&#x27;click.orderingList&#x27;, handler)
        .append($(&#x27;&lt;i /&gt;&#x27;).addClass(&#x27;fa richicon-&#x27; + buttonClass));
      buttonStack.append(button);
    },

    _addMouseHandles: function () {
      if (this.options.mouseOrderable !== true) {
        return;
      }
      if (this.options.dragSelect === true) {
        this.content.addClass(&#x27;with-handle&#x27;);
        if (this.strategy === &#x27;table&#x27;) {
          this.element
            .find(&#x27;tbody &gt; tr&#x27;)
            .prepend(&#x27;&lt;th class=&quot;handle&quot;&gt;&lt;i class=&quot;fa fa-arrows&quot;&gt;&lt;/i&gt;&lt;/th&gt;&#x27;);
          this.element
            .find(&#x27;thead &gt; tr&#x27;)
            .prepend(&#x27;&lt;th class=&quot;handle&quot;&gt;&lt;/th&gt;&#x27;);
        } else if (this.strategy === &#x27;list&#x27;) {
          this.element
            .find(&#x27;li&#x27;)
            .prepend(&#x27;&lt;div class=&quot;handle&quot;&gt;&lt;i class=&quot;fa fa-arrows&quot;&gt;&lt;/i&gt;&lt;/div&gt;&#x27;);
        }
      }
    },

    _addParents: function () {
      this.element.addClass(&#x27;list&#x27;).wrap(
        $(&#x27;&lt;div /&gt;&#x27;).addClass(&#x27;ordering-list select-list&#x27;).attr(&#x27;tabindex&#x27;, -1)
          .focus(function(){
            var x = window.scrollX, y = window.scrollY;
            setTimeout(function() {
              window.scrollTo(x,y);
            }, 0);
          })
          .append(
          $(&#x27;&lt;div /&gt;&#x27;).addClass(&#x27;content&#x27;).append(
            $(&#x27;&lt;div /&gt;&#x27;).addClass(&#x27;scroll-box&#x27;)
          )
        )
      );
      this.selectList = this.element.parents(&#x27;.select-list&#x27;).first();
      if (this.options.styleClass) {
        this.selectList.addClass(this.options.styleClass);
      }
      if (this.options.header) {
        this._addHeader();
      }
      this.content = this.selectList.find(&#x27;.content&#x27;);
    },

    _addHeader: function() {
      var header = $(&#x27;&lt;div /&gt;&#x27;).addClass(&#x27;header&#x27;);
      header.html(this.options.header);
      this.selectList.prepend(header);
      this.header = header;
    },

    _addFillRow: function() {
      var connectedList = this.$pluginRoot.sortable( &#x27;option&#x27;, &#x27;connectWith&#x27; );
      if (!connectedList || this.strategy !== &#x27;table&#x27;) {
        return;
      }

      var itemsSelector = this.$pluginRoot.sortable( &#x27;option&#x27;, &#x27;items&#x27; );
      var children = this.$pluginRoot.find(itemsSelector);
      var child;

      if (children.length &gt; 0) {
        child = children.first();
      } else {
        var connectedChildren = $(connectedList).find(&#x27;tr&#x27;);
        if (connectedChildren.length &gt; 0) {
          child = connectedChildren.first();
        }
      }
      if (child) {
        var fillItem = child.clone();
        fillItem.removeClass().addClass(&#x27;fill-item&#x27;).removeClass(&#x27;ui-selectee&#x27;);
        fillItem.find(&#x27;td&#x27;).empty();
        fillItem.data(&#x27;key&#x27;, undefined);
        this.$pluginRoot.append(fillItem);
        this.fillItem = fillItem;
        this.element.on(this.options.widgetEventPrefix + &#x27;change&#x27;, $.proxy(this._updateFillRow, this));
      }
      this._updateFillRow();
    },

    _updateFillRow: function() {
      if (this.fillItem) {
        this.fillItem.css(&#x27;height&#x27;, &#x27;0&#x27;);
        var table = this.fillItem.parents(&#x27;table&#x27;).first();
        var tbody = this.fillItem.parents(&#x27;tbody&#x27;).first();
        var scrollBox = this.fillItem.parents(&#x27;.scroll-box&#x27;).first();
        this.fillItem.detach();
        var height = scrollBox.height() - table.height();
        var placeholder = this.element.find(&#x27;.placeholder&#x27;);
        if (placeholder) {
          height = height - placeholder.height();
        }
        this.fillItem.height(height);
        this.fillItem.toggle((height &gt; 2));
        tbody.append(this.fillItem);
      }
    },

    _setHeight: function(height) {
      this.selectList.find(&#x27;.scroll-box&#x27;).css(&#x27;height&#x27;, height);
    },

    _setHeightMin: function(height) {
      this.selectList.find(&#x27;.scroll-box&#x27;).css(&#x27;min-height&#x27;, height);
    },

    _setHeightMax: function(height) {
      this.selectList.find(&#x27;.scroll-box&#x27;).css(&#x27;max-height&#x27;, height);
    },

    _disable: function () {
      this.$pluginRoot
        .sortable(&#x27;option&#x27;, &#x27;disabled&#x27;, true)
        .selectable(&#x27;option&#x27;, &#x27;disabled&#x27;, true);
      this.element
        .addClass(&#x27;disabled&#x27;)
        .find(&#x27;.ui-selected&#x27;).removeClass(&#x27;ui-selected&#x27;);
      this.element.find(&#x27;.ui-selectee&#x27;).removeClass(&#x27;ui-selectee&#x27;).addClass(&#x27;ui-disabled&#x27;);
      $(&#x27;.button-column&#x27;, this.content).find(&#x27;button&#x27;).attr(&#x27;disabled&#x27;, true);
      this._removeDragListeners();
    },

    _enable: function () {
      this.$pluginRoot
        .sortable(&#x27;option&#x27;, &#x27;disabled&#x27;, false)
        .selectable(&#x27;option&#x27;, &#x27;disabled&#x27;, false);
      this.element.removeClass(&#x27;disabled&#x27;);
      this.element.find(&#x27;.ui-disabled&#x27;).removeClass(&#x27;ui-disabled&#x27;).addClass(&#x27;ui-selectee&#x27;);
      $(&#x27;.button-column&#x27;, this.content).find(&#x27;button&#x27;).attr(&#x27;disabled&#x27;, false);
      this._addDragListeners();
    },

    /**
     * A dump of the current state of the widget
     *
     * @method _uiHash
     * @private
     * @returns {Object} A &#x60;ui&#x60; object holding the current state.  The &#x60;ui&#x60; object has the properties:
     * &#x60;&#x60;&#x60;&#x60;javascript
     * {
     *   change: &#x27;move&#x27;| &#x27;add&#x27; | &#x27;remove&#x27;,
     *   movement: &#x27;drag&#x27; | &#x27;moveUp&#x27; | &#x27;moveFirst&#x27; | &#x27;moveDown&#x27; | &#x27;moveLast&#x27;
     * }
     * &#x60;&#x60;&#x60;&#x60;
     */
    _uiHash: function () {
      var ui = {};
      ui.orderedElements = this.getOrderedElements();
      ui.orderedKeys = this.getOrderedKeys();
      return ui;
    },

    /** Cleanup methods **/

    _removeDomElements: function () {
      this.element.find(&#x27;.ui-selected&#x27;).removeClass(&#x27;ui-selected&#x27;);
      if (this.strategy === &#x27;table&#x27;) { /* round the table row corners */
        var widget = this;
        this.element.find(&#x27;tr&#x27;).each(function () {
            var $tr = $(this);
            var children = $tr.children();
            children.last().removeClass(&#x27;last&#x27;);
            children.first().removeClass(&#x27;first&#x27;);
            if (widget.options.columnClasses) {
              widget._removeColumnClassesFromCells(children, widget.options.columnClasses);
            }
          });
        if (this.fillItem) {
          this.element.find(&#x27;.fill-item&#x27;).remove();
        }

      }
      var list = this.element.detach();
      this.selectList.replaceWith(list);
      if (this.options.dragSelect === true) {
        this.content.removeClass(&#x27;with-handle&#x27;);
        this.element.find(&#x27;.handle&#x27;).remove();
      }
      if (this.options.disabled === true) {
        this.element.removeClass(&#x27;disabled&#x27;);
        this.element.find(&#x27;.ui-disabled&#x27;).removeClass(&#x27;ui-disabled&#x27;);
      }
      this.element.removeClass(&#x27;list&#x27;);
    },

    _removeColumnClasses: function(columnClasses) {
      if (this.strategy !== &#x27;table&#x27;) {
        return;
      }
      var widget = this;
      this.element.find(&#x27;tr&#x27;).each(function() {
        widget._removeColumnClassesFromCells($(this).children(), columnClasses);
      });
    },

    _removeColumnClassesFromCells: function(cells, columnClassesString) {
      var columnClasses = this._splitColumnClasses(columnClassesString);
      var repeat = $.trim(columnClasses[columnClasses.length - 1]) === &#x27;*&#x27;;
      var length = repeat ? columnClasses.length - 1 : columnClasses.length;
      cells.each(function(count) {
        if (repeat || count &lt; columnClasses.length) {
          var columnClass = columnClasses[count % length];
          $(this).removeClass(columnClass);
        } else {
          return false;
        }
      });
    },

    /** Event Handlers **/

    _firstHandler: function (event) {
      this.moveFirst($(&#x27;.ui-selected&#x27;, this.element), event);
    },

    _upHandler: function (event) {
      this.moveUp($(&#x27;.ui-selected&#x27;, this.element), event);
    },

    _downHandler: function (event) {
      this.moveDown($(&#x27;.ui-selected&#x27;, this.element), event);
    },

    _lastHandler: function (event) {
      this.moveLast($(&#x27;.ui-selected&#x27;, this.element), event);
    }

  });

}(jQuery));

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/yuidoc-bootstrap.js"></script>
<script>prettyPrint();</script>
</body>
</html>
